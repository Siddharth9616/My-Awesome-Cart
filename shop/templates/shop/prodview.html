{% extends 'shop/basic.html' %}

{% block head %}<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>{% endblock head %}
{% block title%}{{product.product_name}} - My Awesome Cart {% endblock %}
{% block style %}
.carousel-control-prev,
.carousel-control-next {
  width: 40px;
  height: 40px;
  background-color: rgba(0, 0, 0, 0.3); /* Light transparent background */
  border-radius: 50%;
  top: 50%;
  transform: translateY(-50%);
}

.carousel-control-prev-icon,
.carousel-control-next-icon {
  background-size: 60% 60%;
  filter: invert(1); /* Make the arrows white */
}

.carousel-control-prev:hover,
.carousel-control-next:hover {
  background-color: rgba(0, 0, 0, 0.6);
}
@media (max-width: 576px) {
  .carousel-control-prev,
  .carousel-control-next {
    display: none;
  }
}

{% endblock style %}
{% block body%} 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


<div class="container my-4">
    <div class="row">
    <div class="col-md-4">
    {% comment %} <div class="row">
        <img src="/media/{{product.image}}" width="233px" height="300px" alt="">
    </div> {% endcomment %}
    <div id="productCarousel" class="carousel slide" data-bs-ride="carousel" style="max-width: 250px; margin: auto;">
  <div class="carousel-inner rounded shadow-sm">
    <div class="carousel-item active">
      <img src="/media/{{product.image}}" class="d-block w-100" style="height: 250px; object-fit: cover;" alt="...">
    </div>
    <div class="carousel-item">
      <img src="/media/{{product.image2}}" class="d-block w-100" style="height: 250px; object-fit: cover;" alt="...">
    </div>
    <div class="carousel-item">
      <img src="/media/{{product.image3}}" class="d-block w-100" style="height: 250px; object-fit: cover;" alt="...">
    </div>
  </div>

  <!-- Smaller, modern carousel buttons -->
  <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev" style="width: 30px;">
    <span class="carousel-control-prev-icon" aria-hidden="true" style="background-size: 70%; filter: invert(1);"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next" style="width: 30px;">
    <span class="carousel-control-next-icon" aria-hidden="true" style="background-size: 70%; filter: invert(1);"></span>
  </button>
</div>

<!-- Buttons under the carousel -->
<div class="row mt-3 justify-content-center">
  <button class="btn btn-primary mx-2">Buy Now</button>
  <button class="btn btn-primary mx-2">Add To Cart</button>
</div>

</div>

<div class="col-md-8">
    <h5>{{product.product_name}}</h5>
    <p><b>Rs.{{product.price}}</b></p>
    <p>{{product.desc}}</p>
    <div>
  <h4>About this item</h4>
  <p>{{product.aboutitem}}</p>
</div>
</div>
</div>
</div>
  {% endblock %}

  {% block js %}

<script>
  if(localStorage.getItem('cart')==null){
    var cart = {};
  }
  else{
    cart= JSON.parse(localStorage.getItem('cart'));
    document.getElementById('cart').innerHTML = Object.keys(cart).length;
  }
  $('.cart').click(function(){
    console.log('clicked');
    var idstr= this.id.toString();
    console.log(idstr)
    if (cart[idstr] != undefined){
      cart[idstr] = cart[idstr] + 1;
    }
    else{
      cart[idstr] = 1;
    }
    console.log(cart);
    localStorage.setItem('cart', JSON.stringify(cart));
    document.getElementById('cart').innerHTML = Object.keys(cart).length;
  });
  $('#popcart').popover()

  document.getElementById("popcart").setAttribute('data-content', '<h5>Cart</h5>')

  
 
  
  
</script>

{%endblock %}
    



